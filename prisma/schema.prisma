generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Model {
  ID             Int      @id @default(autoincrement())
  UserID         Int
  Type           String?
  Params         Json?    @db.Json
  STLPath        String?
  GCODEPath      String?
  TimeStamp      DateTime @default(now()) @db.Timestamptz(6)
  PrintID        Int?
  IsCurrentModel Boolean  @default(true)
  Print          Print?   @relation(fields: [PrintID], references: [ID], onDelete: NoAction, onUpdate: NoAction, map: "PrintID")
  User           User     @relation(fields: [UserID], references: [ID], onDelete: NoAction, onUpdate: NoAction, map: "UserID")

  @@index([PrintID], map: "fki_PrintID")
}

model Print {
  ID        Int      @id @default(autoincrement())
  Status    String?
  Progress  Float    @default(0)
  TimeStamp DateTime @default(now()) @db.Timestamptz(6)
  ModelIDs  Int[]
  Model     Model[]
}

model User {
  ID          Int      @id @default(autoincrement())
  ContactInfo String?
  TimeStamp   DateTime @default(now()) @db.Timestamptz(6)
  Model       Model[]
}
